{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://example.com/cicd.schema.json",
    "title": "Andreani Values Schema",
    "description": "Schema Values for CICD",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "env": {
            "type": "object",
            "description": "Secrets in environment",
            "properties": {
                "normal": {
                    "type": "object",
                    "description": "save as normal",
                    "patternProperties": {
                        "^[a-zA-Z-_]*$": {
                            "minLength": 1
                        }
                    }
                },
                "secret": {
                    "type": "object",
                    "description": "save as secret",
                    "patternProperties": {
                        "^[a-zA-Z-_]*$": {
                            "minLength": 1
                        }
                    }
                }
            },
            "required": [
                "normal",
                "secret"
            ],
            "additionalProperties": false
        },
        "replicacontroller": {
            "type": "object",
            "description": "Revisiones y escalamiento horizontal",
            "properties": {
                "revisionHistoryLimit": {
                    "description": "Cantidad de revisiones",
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 3,
                    "exclusiveMinimum": 0
                },
                "replicas": {
                    "description": "Cantidad de instancias (Pods)",
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 10,
                    "exclusiveMinimum": 0,
                    "exclusiveMaximum": 11
                }
            },
            "additionalProperties": false
        },
        "clusterlogging": {
            "type": "boolean",
            "default": true,
            "additionalProperties": false
        },
        "service": {
            "type": "object",
            "properties": {
                "Port": {
                    "description": "Puerto del servicio",
                    "type": "integer"
                },
                "targetPort": {
                    "description": "Puerto del contenedor",
                    "type": "integer"
                }
            },
            "additionalProperties": false
        },
        "route": {
            "type": "boolean",
            "description": "Formato estandar de ruta: [nombre-de-app]-[nombre-de-proyecto]-[ambiente].clusterFQDN Exponer en una ruta privada: true o false",
            "default": true
        },
        "healthcheck": {
            "description": "Pruebas de lectura y vida",
            "type": "object",
            "properties": {
                "readiness": {
                    "type": "boolean",
                    "description": "Ejecutar prueba de lectura"
                },
                "readinesspath": {
                    "type": "string",
                    "default": "/index.html"
                },
                "readinessport": {
                    "type": "string",
                    "default": "8080"
                },
                "readinessscheme": {
                    "const": "HTTP"
                },
                "liveness": {
                    "type": "boolean",
                    "description": "Ejecutar prueba de vida"
                },
                "livenesspath": {
                    "type": "string",
                    "default": "/index.html"
                },
                "livenessport": {
                    "type": "string",
                    "default": "8080"
                },
                "livenessscheme": {
                    "const": "HTTP"
                }
            },
            "additionalProperties": false
        },
        "cronjob": {
            "type": "object",
            "properties": {
                "enable": {
                    "type": "boolean",
                    "default": false
                },
                "crons": {
                    "type": "object",
                    "propertyNames": {
                        "type": "string"
                    },
                    "patternProperties": {
                        "": {
                            "type": "object",
                            "properties": {
                                "name": {
                                    "enum": [
                                        "diario",
                                        "semanal",
                                        "mensual",
                                        "anual"
                                    ]
                                },
                                "schedule": {
                                    "type": "string"
                                },
                                "successfulJobsHistoryLimit": {
                                    "type": "integer"
                                },
                                "failedJobsHistoryLimit": {
                                    "type": "integer"
                                }
                            }
                        }
                    }
                }
            },
            "additionalProperties": false
        },
        "configMap": {
            "type": "object",
            "properties": {
                "enable": {
                    "type": "boolean",
                    "default": false
                },
                "path": {
                    "default": "/home/redis-master"
                },
                "file": {
                    "default": "redis.conf"
                },
                "key": {
                    "default": "redis-config"
                },
                "map": {
                    "type": "object"
                }
            }
        }
    },
    "required": [
        "env",
        "replicacontroller",
        "service",
        "route",
        "healthcheck",
        "cronjob",
        "configMap",
        "clusterlogging"
    ]
}