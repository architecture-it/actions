name: "SonarQube Analyzer"
description: "Se realiza el análisis en sonarqube"
inputs:
  github_username:
    description: "usuario de github para autenticarse en los packages"
    required: false
    default: ''
  github_token:
    description: "token del usuario con permisos de lectura en packages"
    required: false
    default: ''
  workdir_src:
    description: "directorio donde se encuentra el project a compilar DEFAULT: ./"
    required: false
    default: './'
  workdir_test:
    description: "directorio donde se encuentra los test DEFAULT: ./"
    required: false
    default: './'
  sonar_url: 
    description: "url sonarqube"
    required: true
  sonar_token: 
    description: "token sonarqube"
    required: true
  sonar_code:
    description: "Lenguaje de programación: .Net, Java, Go, Python, Js "
    required: true
  skip_test: 
    description: "Omite el analisis de test"
    required: false
    default: 'false'
  version:
    description: "version de lenguaje, ej 3.7, 3.8..."
    required: false
    default: '3.8'
runs:
  using: "composite"
  steps:
    - name: "Call API 1"
      uses: indiesdev/curl@v1.1
      id: api
      with:
        url: https://reqres.in/api/users
        method: "POST"
        accept: 201
        body: '{ "name": "breeze", "job": "devops" }'
        log-response: true
    - name: "Call API 2"
      uses: indiesdev/curl@v1.1
      id: api2
      with:
        url: https://reqres.in/api/users
        method: "POST"
        accept: 201
        # you can use multiline format to constrct json data object, the content should be yml format.
        # this format apply to inputs: body, headers and params
        body: |
          name: breeze
          job: devops
        log-response: true
    - name: "Use response"
      run: echo ${{ steps.api.outputs.response }}
